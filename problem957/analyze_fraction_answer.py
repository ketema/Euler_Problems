#!/usr/bin/env python3
"""
Analyze the rational g(16) to find possible answer formats
"""
from fractions import Fraction

# The exact g(16) from our recurrence
numerator = 26881150706322905951141050230768841994215798918300659268478023670452065464132797155351545925638045960416792719623668451522048336747223311121568931679652404633241908409450511285996668257814798532832758440487120113302602184196329774222903365439850855686593447062304279233308312544843757668687077284577781348011905808210191952239869608135200543402316622450461023375424466742452224991888254340838108505131126200075213237632474856188652758589769304908735015692521026122926799960898166784484271097099807580362351810328584476319403926657103173562713594721305145582535302040818852433514155100995538676771314340065340761216001443192396998231577323655755270625875959688660622684789041070157664789067193637229138254489793398510048576144309639766458226199647453298981906000581396841595404738532874136282102515169686326180712783443506181577956793986537285512988585974195354534630024650344017963576307636262453972056579515848478731080100944756737060850470219815388739461081814862904272875624208671636738391275290010551144123293650842584219769755785413174308236284776281674731673277063475486699919888575745350504396050170954817280585906543630847958949079090878084132283750793726093944140860488587127650094001942439301254727977057788718732602969

denominator = 107163596189911017950956973960406298602557508261312162368794353906791469889499696253379610292058431389330318701815967280041913783959028940090904042850187322364210383997284931786021448773538536484069025810996180390907605753798773218473400022980246783057616470509852724413970993802567692508837481093727245924395473194254121472695081138812468301294149128147450428624058126882078512895816596394177955000056833763720767430390602258784707373521016433143603254757172172602264931911811087447257803195190699504187360500798080823253925107318748327307020479254126718556684200751892511302354998542813647779236292897396842815488479356427086661582211421446466010135298151730986983193561289898918665344197813390571025766643112966855464854894202066617623010188075779600620974433442957113687750829277861526591569274852656880236594117811851271600288528383554556632441065984638706028311863489449923583477815798298279611070455378976609531936544606248826578204032447803023231457673886100142627967395969812339707188641240885936172706336349944180619969581689787772779229189674299148204463157147649179648

print("="*70)
print("ANALYZING RATIONAL g(16) FOR PE ANSWER FORMATS")
print("="*70)
print()

print(f"Numerator digits: {len(str(numerator))}")
print(f"Denominator digits: {len(str(denominator))}")
print()

# Check if already simplified
from math import gcd
g = gcd(numerator, denominator)
print(f"GCD(numerator, denominator) = {g}")
if g == 1:
    print("âœ“ Fraction is already in simplest form")
else:
    print(f"  Can simplify by dividing by {g}")
    numerator = numerator // g
    denominator = denominator // g
print()

# Possible PE answer formats
print("="*70)
print("POSSIBLE ANSWER FORMATS")
print("="*70)
print()

print("1. JUST THE NUMERATOR:")
print(f"   {numerator}")
print()

print("2. JUST THE DENOMINATOR:")
print(f"   {denominator}")
print()

print("3. NUMERATOR MOD 10^9:")
print(f"   {numerator % (10**9)}")
print()

print("4. DENOMINATOR MOD 10^9:")
print(f"   {denominator % (10**9)}")
print()

print("5. (NUMERATOR + DENOMINATOR) MOD 10^9:")
print(f"   {(numerator + denominator) % (10**9)}")
print()

print("6. LAST 9 DIGITS OF NUMERATOR:")
last_9_num = str(numerator)[-9:]
print(f"   {last_9_num}")
print()

print("7. LAST 9 DIGITS OF DENOMINATOR:")
last_9_den = str(denominator)[-9:]
print(f"   {last_9_den}")
print()

print("8. SUM OF DIGITS OF NUMERATOR:")
sum_digits_num = sum(int(d) for d in str(numerator))
print(f"   {sum_digits_num}")
print()

print("9. SUM OF DIGITS OF DENOMINATOR:")
sum_digits_den = sum(int(d) for d in str(denominator))
print(f"   {sum_digits_den}")
print()

print("10. FLOOR(numerator / denominator):")
floor_val = numerator // denominator
print(f"   {floor_val}")
print(f"   (scientific: {float(floor_val):.4e})")
print()

print("11. CEILING(numerator / denominator):")
ceiling_val = (numerator + denominator - 1) // denominator
print(f"   {ceiling_val}")
print()

print("="*70)
print("MOST LIKELY CANDIDATES (based on PE patterns)")
print("="*70)
print()

candidates = [
    ("Last 9 digits of numerator", last_9_num),
    ("Numerator mod 10^9", numerator % (10**9)),
    ("Last 9 digits of denominator", last_9_den),
    ("Floor value", floor_val),
    ("Sum of numerator digits", sum_digits_num),
]

for desc, val in candidates:
    print(f"{desc:.<40} {val}")

print()
print("NOTE: If g(16) is truly a fraction, PE typically asks for:")
print("  - Last N digits (mod 10^N)")
print("  - Floor or ceiling")
print("  - Sum of digits")
print()
