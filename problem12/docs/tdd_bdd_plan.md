# TDD/BDD Architecture and Implementation Plan for Problem 12 (Triangle Numbers)

## Purpose

This plan is designed to solve [Project Euler Problem 12: Highly Divisible Triangular Number](https://projecteuler.net/problem=12).

**Problem Statement:**

The sequence of triangle numbers is generated by adding the natural numbers. So the 7th triangle number would be 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28. The first ten terms would be:

    1, 3, 6, 10, 15, 21, 28, 36, 45, 55, ...

Let us list the factors of the first seven triangle numbers:

    1: 1
    3: 1, 3
    6: 1, 2, 3, 6
    10: 1, 2, 5, 10
    15: 1, 3, 5, 15
    21: 1, 3, 7, 21
    28: 1, 2, 4, 7, 14, 28

We can see that 28 is the first triangle number to have over five divisors.

**Question:** What is the value of the first triangle number to have over five hundred divisors?

---

## 1. Installation of Testing Libraries

Add `rstest` and `speculate` to `Cargo.toml` for enhanced TDD/BDD support.

---

## 2. Project Structure

- `src/main.rs`: Entry point, minimal logic, delegates to library code.
- `src/lib.rs`: Core logic and algorithms.
- `tests/`: Integration and BDD-style tests (Rust supports this natively).
- `Cargo.toml`: Add dependencies for testing/BDD if needed.

---

## 3. Testing Libraries

Rustâ€™s built-in test framework is robust for TDD. For BDD-style, consider:

- [`rstest`](https://crates.io/crates/rstest): Parameterized tests.
- [`speculate`](https://crates.io/crates/speculate): BDD-style test syntax.
- [`proptest`](https://crates.io/crates/proptest): Property-based testing (optional).

**Recommendation:** Install `rstest` and `speculate` for readable, BDD-style tests.

---

## 4. Implementation Plan (Red, Green, Refactor)

### Step 1: Red (Write Failing Tests)

- Write tests for:
  - Generating the nth triangle number.
  - Counting divisors of a number.
  - Finding the first triangle number with over N divisors.
- Use BDD-style descriptions for clarity.

### Step 2: Green (Implement Minimal Code)

- Implement functions to pass the tests:
  - `triangle_number(n: u64) -> u64`
  - `count_divisors(n: u64) -> u32`
  - `find_triangle_with_divisors(min_divisors: u32) -> u64`

### Step 3: Refactor

- Refactor for performance and readability.
- Optimize divisor counting (e.g., using prime factorization).
- Ensure all tests still pass.

---

## 5. Example Test Cases

- The 7th triangle number is 28.
- 28 has 6 divisors.
- The first triangle number with over 5 divisors is 28.
- The first triangle number with over 500 divisors is the target.

---

**Review this plan before implementation begins.**
